<html>
	<script>
	$(document).ready(function(){
		$('#first-buy').click(function(){
			validateBuyForm();
		});

		$('#buy-submit').click(function(){
			var ticker = $('#buy-ticker').val().toUpperCase();
			var shares = $('#buy-shares').val();
			getStockPrice(ticker, shares, 'buy');
			
		});

		$('#buy-success-close').click(function(){
			//refresh the datatable and stock buy form
			clearChildren(document.getElementById('buy-form'));
            window.stockTable.destroy();
            $('#myTable tfoot tr').remove();
            $('#myTable tbody').remove();
            getUserStockData();
		});

		$('#sell-submit').click(function(){
			//var ticker = $('#sell-form-ticker').val().toUpperCase();
			//var shares = $('#sell-form-shares').val();
			//alert(ticker + ' ' + shares);
			validateSellForm();
		});

		$('#sell-confirm').click(function(){
			var ticker = $('#sell-form-ticker').val().toUpperCase();
			var shares = $('#sell-form-shares').val();
			getStockPrice(ticker, shares, 'sell')
		});

		$('#sell-success-close').click(function(){
			//refresh the datatable and stock buy form
			clearChildren(document.getElementById('buy-form'));
			clearChildren(document.getElementById('sell-modal'));
            window.stockTable.destroy();
            $('#myTable tfoot tr').remove();
            $('#myTable tbody').remove();
            getUserStockData();
		});

		window.totalChange = parseFloat(0);
    	window.totalMarketCap = 0;
    	window.totalGain = 0;
    	window.totalGainPc = 0;
    	window.totalDaysGain = 'TBD';
		getUserStockData();

	});
	</script>
	<style type="text/css">
		div.row {
			max-width: 100%!important;
			width:100%;
			margin-right: 0px;
			margin-left: 0px;
		}
	</style>
	<body>
		<div id="debug-output">
		</div>
		<div id="buy-form" name="buy-form">
			<input id="buy-ticker" type="text" placeholder="ticker">
			<input id="buy-shares" type="text" placeholder="shares">
			<a href="#" id="first-buy" class="radius button tiny">Buy</a>
		</div>
		<table id="myTable">
			<thead>
			</thead>
			<tbody>
			</tbody>
			<tfoot>
			</tfoot>
		</table>
		<!-- Reveal Modals begin -->
		<div id="confirm-modal" class="reveal-modal" data-reveal aria-labelledby="confirm-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="confirm-modal-title">Confirm Purchase</h2>
		  <p></p>
		  <p><a href="javascript:void(0);" id="buy-submit" data-reveal-id class="secondary button">Confirm</a></p>
		  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>

		<div id="invalid-buy-modal" class="reveal-modal" data-reveal aria-labelledby="invalid-buy-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="invalid-buy-modal-title">Invalid Field(s)</h2>
		  <p class="invalid"></p>
		  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>
		<div id="buy-success-modal" class="reveal-modal" data-reveal aria-labelledby="buy-success-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="buy-success-modal-title" class="success">Purchase Successful</h2>
		  <a id="buy-success-close"class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>
		<div id="sell-modal" class="reveal-modal" data-reveal aria-labelledby="sell-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="sell-modal-title"></h2>
		  <input type="hidden" id="sell-form-ticker" name="sell-form-ticker"> 
		  <input type="hidden" id="sell-form-held" name="sell-form-held">
		  <input type="text" id="sell-form-shares" name="sell-form-shares" placeholder="shares" style="display:inline;width:100px;">
		  <a href="javascript:void(0);" id="sell-submit" data-reveal-id class="radius button tiny ">Sell</a>
		  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>
		<div id="invalid-sell-modal" class="reveal-modal" data-reveal aria-labelledby="invalid-sell-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="invalid-sell-modal-title">Invalid Field(s)</h2>
		  <p class="invalid"></p>
		  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>
		<div id="confirm-sell-modal" class="reveal-modal" data-reveal aria-labelledby="confirm-sell-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="confirm-sell-modal-title">Confirm Purchase</h2>
		  <p></p>
		  <p><a href="javascript:void(0);" id="sell-confirm" data-reveal-id class="secondary button">Confirm</a></p>
		  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>
		<div id="sell-success-modal" class="reveal-modal" data-reveal aria-labelledby="sell-success-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="sell-success-modal-title" class="success">Sale Successful</h2>
		  <a id="sell-success-close"class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>
		<div id="ticker-not-exist-modal" class="reveal-modal" data-reveal aria-labelledby="ticker-not-exist-modal-title" aria-hidden="true" role="dialog">
		  <h2 id="ticker-not-exist-modal-title">Invalid Field(s)</h2>
		  <p class="invalid">Ticker symbol does not exist</p>
		  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
		</div>
	</body>
</html>